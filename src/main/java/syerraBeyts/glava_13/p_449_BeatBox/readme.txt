Создаем BeatBox, его основвые части.

1. Проектируем GUI, который будет иметь 256 снятых флажков
(JCheckBox), 16 меток (JLabel) для названий инструментов и
четыре кнопки.

2. Связываем ActionListener с каждой из четырех кнопок. Слушатели
для флажков нам не нужны, потому что мы не будем динамически
изменять схему звучания (то есть когда пользователь
устанавливает флажки). Вместо этого мы ждем, пока пользователь нажмет
кнопку Старт, а затем пробегаем через все 256 флажков, чтобы
получить их состояния, и, основываясь на этом, создаем
MIDI-дорожку.

3. Устанавливаем систему MIDI (мы делали это раньше), получая
доступ к синтезатору, создаем объект Sequencer и дорожку для
него. Мы используем новый метод интерфейса Sequencer set-
LoopCount(), появившийся в Java 5.0. Он позволяет определять
желаемое количество циклов последовательности. Мы также
будем использовать коэффициент темпа последовательности
для настройки уровня темпа и сохранять новый темп от одной
итерации цикла к другой.

4. При нажатии пользователем кнопки Старт начинается настоящее
действие. Обработчик событий кнопки запускает метод build-
TrackAndStartQ. В нем мы пробегаем через все 256 флажков (по
одному ряду за один раз, один инструмент на все 16 тактов), чтобы
получить их состояния, а затем используем эту информацию для
создания MIDI-дорожки (с помощью удобного метода makeEventQ,
который мы применяли в предыдущей главе). Как только дорожка
построена, мы запускаем секвенсор, который будет играть (потому
что мы его зацикливаем), пока пользователь не нажмет кнопку
Стоп.